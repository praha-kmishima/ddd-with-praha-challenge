# 進捗状況

## 完了した機能

### 基本的なTODOリスト機能
- ✅ タスクエンティティの実装
  - タイトルと完了状態を持つシンプルな構造
  - タイトルのバリデーション（空文字チェック、最大長チェック）
  - ULIDによるID生成

- ✅ タスクリポジトリの実装
  - インターフェース定義
  - PostgreSQL実装

- ✅ タスク関連のユースケース
  - タスク作成ユースケース
  - タスクタイトル編集ユースケース
  - タスク完了状態変更ユースケース

- ✅ タスク関連のAPIエンドポイント
  - タスク作成エンドポイント（POST /tasks/new）
  - タスク取得エンドポイント（GET /tasks/:id）
  - タスクリスト取得エンドポイント（GET /tasks）
  - タスクタイトル編集エンドポイント（PATCH /tasks/:id/title）
  - タスク完了状態変更エンドポイント（PATCH /tasks/:id/done）

### 開発環境の整備
- ✅ TypeScriptの設定
- ✅ Vitestによるテスト環境
- ✅ Biomeによるリント/フォーマット
- ✅ Docker Composeによるデータベース環境
- ✅ Drizzleによるマイグレーション管理

## 進行中の機能

### ドメインモデルの設計
- 🔄 4つの集約の詳細設計
  - 参加者集約
  - チーム集約
  - 課題集約
  - チームメンバーシップ集約

- 🔄 値オブジェクトの設計
  - EmailAddress
  - EnrollmentStatus
  - ProgressStatus

### アーキテクチャの整備
- 🔄 ドメインイベントの仕組み検討
- 🔄 ドメインサービスの設計

## 未実装の機能

### 参加者管理
- ❌ 参加者エンティティ
- ❌ 参加者リポジトリ
- ❌ 参加者関連のユースケース
  - 参加者登録
  - 参加者情報編集
  - 在籍状態変更

### チーム管理
- ❌ チームエンティティ
- ❌ チームリポジトリ
- ❌ チーム関連のユースケース
  - チーム作成
  - チーム情報編集

### チームメンバーシップ管理
- ❌ チームメンバーシップエンティティ
- ❌ チームメンバーシップリポジトリ
- ❌ チームメンバーシップ関連のユースケース
  - メンバーシップ追加
  - メンバーシップ削除

### 課題管理
- ❌ 課題エンティティ（現在のタスクの拡張）
- ❌ 課題リポジトリ
- ❌ 課題関連のユースケース
  - 課題割り当て
  - 進捗ステータス更新

### ドメインサービス
- ❌ チーム再編サービス
- ❌ 参加者管理サービス
- ❌ 課題管理サービス

### 複雑なビジネスルール
- ❌ 参加者の増減に伴うチーム再編ロジック
- ❌ メール通知機能
- ❌ 課題の進捗管理ロジック

## 既知の問題

### 設計上の問題
1. **Value Objectの未実装**
   - 現状はプリミティブ型を直接使用している
   - 値オブジェクトによるドメインの表現力が不足

2. **Nominal Typingの未対応**
   - 同じプロパティを持つクラスが型的に等価になってしまう
   - ドメインの概念を型で明確に区別できていない

3. **集約間の参照方法**
   - 集約間の参照をIDで行う方針だが、実装が不十分
   - 整合性確保の仕組みが未実装

### 技術的な問題
1. **エラーハンドリング**
   - 一部のユースケースでのみカスタムエラーを定義
   - 統一的なエラーハンドリングの仕組みが不足

2. **テストカバレッジ**
   - ドメイン層のみテスト実装
   - ユースケースやインフラストラクチャ層のテストが不足

3. **パフォーマンス**
   - N+1問題への対応が不十分
   - クエリの最適化が必要

## 次のマイルストーン

### マイルストーン1: 参加者管理の実装
- 参加者エンティティとEmailAddress/EnrollmentStatus値オブジェクトの実装
- 参加者リポジトリの実装
- 参加者関連のユースケースとAPIエンドポイントの実装
- 参加者のテストケース実装

### マイルストーン2: チーム管理の実装
- チームエンティティの実装
- チームリポジトリの実装
- チーム関連のユースケースとAPIエンドポイントの実装
- チームのテストケース実装

### マイルストーン3: チームメンバーシップの実装
- チームメンバーシップエンティティの実装
- チームメンバーシップリポジトリの実装
- チームメンバーシップ関連のユースケースとAPIエンドポイントの実装
- チームメンバーシップのテストケース実装

### マイルストーン4: 課題管理の実装
- 課題エンティティとProgressStatus値オブジェクトの実装
- 課題リポジトリの実装
- 課題関連のユースケースとAPIエンドポイントの実装
- 課題のテストケース実装

### マイルストーン5: ドメインサービスとイベントの実装
- ドメインイベントの仕組み実装
- チーム再編サービスの実装
- 参加者管理サービスの実装
- 課題管理サービスの実装
- 複雑なビジネスルールのテストケース実装
