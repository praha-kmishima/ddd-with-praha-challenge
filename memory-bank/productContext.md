# プロダクトコンテキスト

## プラハチャレンジとは
プラハチャレンジは、プログラミング学習者が実践的なスキルを身につけるための課題プログラムです。参加者はチームに所属し、様々な課題に取り組みながら技術力を向上させていきます。

## 解決する問題
- 参加者の管理と適切なチーム編成の自動化
- 課題の進捗状況の透明化と管理
- チーム人数の変動に対する適切な対応
- 参加者の在籍状態変更に伴う処理の自動化

## 主要なドメイン概念

### 参加者（Participant）
参加者はプログラムに登録された個人を表します。各参加者は名前とメールアドレスを持ち、在籍ステータスによって現在の状態が管理されます。

**特徴：**
- 一意のメールアドレスを持つ
- 在籍ステータス（在籍中、休会中、退会済）を持つ
- 複数の課題を所有する
- チームに所属することができる（在籍中の場合のみ）

### チーム（Team）
チームは参加者のグループを表します。各チームには名前があり、2〜4名の参加者で構成されます。

**特徴：**
- 英文字（a, b, c, d等）の一意の名前を持つ
- 2〜4名の参加者で構成される
- 参加者の増減に応じて再編成される可能性がある

### 課題（Task）
課題は参加者が取り組むべき学習項目を表します。各参加者は複数の課題を所有し、それぞれの進捗状況を管理します。

**特徴：**
- 各参加者が約80個の課題を所有する
- 進捗ステータス（未着手、取組中、レビュー待ち、完了）を持つ
- 進捗ステータスの変更には特定のルールが存在する
- 進捗ステータスを変更できるのは課題の所有者のみ

### チームメンバーシップ（TeamMembership）
参加者とチームの関係を表します。参加者の在籍状態やチームの人数制約に基づいて管理されます。

**特徴：**
- 参加者とチームを関連付ける
- 参加者の在籍状態変更に応じて更新される
- チームサイズの制約を維持するための基盤となる

## ビジネスルールと制約

### 参加者の増減に関するルール
1. **参加者が減る場合（休会・退会）**
   - チームが2名以下になる場合：管理者にメール通知
   - チームが1名になる場合：残った参加者を他のチームに自動的に合流
   - 合流先は最も人数が少ないチームから選択（同数の場合はランダム）
   - 合流可能なチームがない場合：管理者にメール通知

2. **参加者が増える場合（復帰）**
   - 最も人数が少ないチームに自動的に配属
   - チームが5名になる場合：自動的に2つのチームに分解

### 課題の進捗ステータス変更ルール
- 「未着手」→「取組中」のみ可能
- 「取組中」→「レビュー待ち」のみ可能
- 「レビュー待ち」→「取組中」または「完了」が可能
- 「完了」は変更不可
- 進捗ステータスを変更できるのは課題の所有者のみ

## ユーザー体験の目標
- 参加者の状態変更に伴う処理を自動化し、管理者の負担を軽減する
- チーム編成の最適化を自動的に行い、学習環境の質を維持する
- 課題の進捗管理を透明化し、学習の進捗を可視化する
- ビジネスルールに則った一貫性のある操作を保証する
